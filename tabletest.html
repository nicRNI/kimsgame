<script src="menupage.html"></script>

<script src="menuJS.js"></script>

<script>

//use .toLowerCase() for answers********************************


        var data = [
        [localStorage["ID"],localStorage["Menu"],'','','','','','','',localStorage[localStorage["ID"]+localStorage["Menu"]+"correct"]," "+localStorage["datetimePre"]+" "," "+localStorage["datetimePost"]+" "],   //datetime should be fixed so that it tracks beginning of PRE and POST (use local storage)
        ['','',localStorage[localStorage["ID"]+localStorage["Menu"]+"item0"],localStorage[localStorage["ID"]+localStorage["Menu"]+"color0"],Number(localStorage["itemPos0"])+1,localStorage["resp1"],localStorage["cresp1"],localStorage["correctItem0"],localStorage["correctColor0"]],
        ['','',localStorage[localStorage["ID"]+localStorage["Menu"]+"item1"],localStorage[localStorage["ID"]+localStorage["Menu"]+"color1"],Number(localStorage["itemPos1"])+1,localStorage["resp2"],localStorage["cresp2"],localStorage["correctItem1"],localStorage["correctColor1"]],
        ['','',localStorage[localStorage["ID"]+localStorage["Menu"]+"item2"],localStorage[localStorage["ID"]+localStorage["Menu"]+"color2"],Number(localStorage["itemPos2"])+1,localStorage["resp3"],localStorage["cresp3"],localStorage["correctItem2"],localStorage["correctColor2"]],
        ['','',localStorage[localStorage["ID"]+localStorage["Menu"]+"item3"],localStorage[localStorage["ID"]+localStorage["Menu"]+"color3"],Number(localStorage["itemPos3"])+1,localStorage["resp4"],localStorage["cresp4"],localStorage["correctItem3"],localStorage["correctColor3"]],
        ['','',localStorage[localStorage["ID"]+localStorage["Menu"]+"item4"],localStorage[localStorage["ID"]+localStorage["Menu"]+"color4"],Number(localStorage["itemPos4"])+1,localStorage["resp5"],localStorage["cresp5"],localStorage["correctItem4"],localStorage["correctColor4"]],
        ['','',localStorage[localStorage["ID"]+localStorage["Menu"]+"item5"],localStorage[localStorage["ID"]+localStorage["Menu"]+"color5"],Number(localStorage["itemPos5"])+1,localStorage["resp6"],localStorage["cresp6"],localStorage["correctItem5"],localStorage["correctColor5"]],
        ['','',localStorage[localStorage["ID"]+localStorage["Menu"]+"item6"],localStorage[localStorage["ID"]+localStorage["Menu"]+"color6"],Number(localStorage["itemPos6"])+1,localStorage["resp7"],localStorage["cresp7"],localStorage["correctItem6"],localStorage["correctColor6"]],
        ['','',localStorage[localStorage["ID"]+localStorage["Menu"]+"item7"],localStorage[localStorage["ID"]+localStorage["Menu"]+"color7"],Number(localStorage["itemPos7"])+1,localStorage["resp8"],localStorage["cresp8"],localStorage["correctItem7"],localStorage["correctColor7"]],
        ['','',localStorage[localStorage["ID"]+localStorage["Menu"]+"item8"],localStorage[localStorage["ID"]+localStorage["Menu"]+"color8"],Number(localStorage["itemPos8"])+1,localStorage["resp9"],localStorage["cresp9"],localStorage["correctItem8"],localStorage["correctColor8"]],
        ['','',localStorage[localStorage["ID"]+localStorage["Menu"]+"item9"],localStorage[localStorage["ID"]+localStorage["Menu"]+"color9"],Number(localStorage["itemPos9"])+1,localStorage["resp10"],localStorage["cresp10"],localStorage["correctItem9"],localStorage["correctColor9"]],
        ['','',localStorage[localStorage["ID"]+localStorage["Menu"]+"item10"],localStorage[localStorage["ID"]+localStorage["Menu"]+"color10"],Number(localStorage["itemPos10"])+1,localStorage["resp11"],localStorage["cresp11"],localStorage["correctItem10"],localStorage["correctColor10"]],
        ['','',localStorage[localStorage["ID"]+localStorage["Menu"]+"item11"],localStorage[localStorage["ID"]+localStorage["Menu"]+"color11"],Number(localStorage["itemPos11"])+1,localStorage["resp12"],localStorage["cresp12"],localStorage["correctItem11"],localStorage["correctColor11"]],


    ];


    function download_csv() {
        var csv = '"ID",MenuChoice,Item,Color,Location,ItemResponse,ColorResponse,CorrectItem,CorrectColor,TotalCorrect,DateTimePRE,DateTimePOST\n';
        data.forEach(function(row) {
            csv += row.join(',');
            csv += "\n";
        });

        console.log(csv);
        var hiddenElement = document.createElement('a');
        hiddenElement.href = 'data:text/csv;charset=utf-8,' + encodeURI(csv);
        hiddenElement.target = '_blank';
        hiddenElement.download = localStorage["ID"]+localStorage["Menu"]+'KIM.csv';
        hiddenElement.click();
    }
</script>

<button onclick="download_csv()">Download CSV</button>
